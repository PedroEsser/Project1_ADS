<!DOCTYPE html>
<html>
<title>Ontology Editor</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://unpkg.com/tabulator-tables@5.0.7/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.0.7/dist/js/tabulator.min.js"></script>
<style>button,body,h1,h2,h3,h4,h5,h6 {font-family: "Times New Roman"}</style>

<body>

	<div class="w3-top">
	  <div class="w3-bar w3-white w3-border w3-large">
	  	<input id="editor" type="button" value="Ontology Editor" style="cursor: pointer;" class="w3-bar-item w3-hide-small w3-padding-large w3-white"/>
	  	<input id="log" type="button" value="Login as Curator" onclick="window.location.href='login.html'" style="cursor: pointer;" class="w3-bar-item w3-hide-small w3-padding-large w3-white w3-right"/>
	  </div>
	</div>
	
	<div style="position:relative; padding:100px 50px 0px 50px;">
		<div style="float: left; width: 48%;">
			<div id="taxonomy-table"></div>
			<div class="w3-bar w3-large" style="padding-top: 5px;">
				<input id="create-class" type="button" value="Create" onclick="taxonomy_load(this)" style="font-size: 15px; cursor: pointer;"/>
				<input id="edit-class" type="button" value="Edit" onclick="taxonomy_load(this)" style="font-size: 15px; cursor: pointer;"/>
				<input id="delete-class" type="button" value="Delete" onclick="taxonomy_load(this)" style="font-size: 15px; cursor: pointer;"/>
			</div>
		</div>
		<div style="float: right; width: 48%;">
			<div id="individuals-table"></div>
			<div class="w3-bar w3-large" style="padding-top: 5px;">
				<input id="create-individual" type="button" value="Create" onclick="individuals_load(this)" style="font-size: 15px; cursor: pointer;"/>
				<input id="edit-individual" type="button" value="Edit" onclick="individuals_load(this)" style="font-size: 15px; cursor: pointer;"/>
				<input id="delete-individual" type="button" value="Delete" onclick="individuals_load(this)" style="font-size: 15px; cursor: pointer;"/>
			</div>
		</div>
		
		<div id="create-class-modal" class="w3-modal" style="background-color: rgba(0,0,0,0);">
			<div class="w3-modal-content w3-center" style="width:375px; border: 1.5px solid #000000; border-radius: 10px; ">
				<span id="create-class-span" style="position:absolute; right:15px ; color: #aaaaaa; font-size: 30px; font-weight: bold; cursor: pointer;">&times;</span>
				<h2>Create Class</h2>
				<form action="script.php" method="post">
			  		<div style="margin-bottom: 15px">
						<label for="super-class-input" style="margin-right: 13px">Super Class:</label>
			      		<input id="super-class" type="text" name="super-class-input" readonly>
					</div>
					<div style="margin-bottom: 15px">
						<label for="class-input" style="margin-right: 12px">Class Name:</label>
			      		<input type="text" placeholder="Enter Class Name" name="class-input" required>
					</div>
					<div style="margin-bottom: 15px">
						<label for="email-input" style="margin-right: 16px">User Email:</label>
				      	<input type="email" placeholder="Enter Email" name="email-input" required>
					</div>
			      	<button type="submit" style="margin-bottom: 20px">Send Request</button>
		      	</form>
			</div>
		</div>
		
		<div id="edit-class-modal" class="w3-modal " style="background-color:rgba(0,0,0,0);">
			<div class="w3-modal-content w3-center" style="width:375px; border: 1.5px solid #000000; border-radius: 10px; ">
				<span id="edit-class-span" style="position:absolute; right:15px ; color: #aaaaaa; font-size: 30px; font-weight: bold; cursor: pointer;">&times;</span>
				<h2>Edit Class</h2>
				<form action="script.php" method="post">
			  		<div style="margin-bottom: 15px">
						<label for="old-class-input" style="margin-right: 10px">Old Class Name:</label>
			      		<input id="edited-class" type="text" name="old-class-input" readonly>
					</div>
					<div style="margin-bottom: 15px">
						<label for="new-class-input" style="margin-right: 4px">New Class Name:</label>
			      		<input type="text" placeholder="Enter Class Name" name="new-class-input" required>
					</div>
					<div style="margin-bottom: 15px">
						<label for="email-input" style="margin-right: 40px">User Email:</label>
				      	<input type="email" placeholder="Enter Email" name="email-input" required>
					</div>
			      	<button type="submit" style="margin-bottom: 20px">Send Request</button>
		      	</form>
			</div>
		</div>
		
		<div id="delete-class-modal" class="w3-modal " style="background-color:rgba(0,0,0,0);">
			<div class="w3-modal-content w3-center" style="width:375px; border: 1.5px solid #000000; border-radius: 10px; ">
				<span id="delete-class-span" style="position:absolute; right:15px ; color: #aaaaaa; font-size: 30px; font-weight: bold; cursor: pointer;">&times;</span>
				<h2>Delete Class</h2>
				<form action="script.php" method="post">
			  		<div style="margin-bottom: 15px">
						<label for="class-input" style="margin-right: 12px">Class Name:</label>
			      		<input id="deleted-class" type="text" name="class-input" readonly>
					</div>
					<div style="margin-bottom: 15px">
						<label for="email-input" style="margin-right: 16px">User Email:</label>
				      	<input type="email" placeholder="Enter Email" name="email-input" required>
					</div>
			      	<button type="submit" style="margin-bottom: 20px">Send Request</button>
		      	</form>
			</div>
		</div>
	</div>
	
	<div class="w3-bottom w3-center" style="padding:0px 0px 50px 0px;">
		<a style="margin-right: 10px;" href="index.html">&laquo;</a>
	  	<a style="margin-right: 10px;" href="index.html">Classes & Individuals</a>
	  	<a style="margin-right: 10px;" href="properties.html">Properties</a>
	  	<a style="margin-right: 10px;" href="properties.html">&raquo;</a>
	</div>
	
	<script id="taxonomy" type="application/json" src="taxonomy.json"></script>
	<script>
		var taxonomy_data = [
			 {
			  "class": "Algorithm",
			  "_children": [
			   {
			    "class": "B",
			    "_children": [{
			     "class": "E",
			     "_children": [{"class": "F"}]
			    }]
			   },
			   {"class": "C"},
			   {"class": "D"}
			  ]
			 },
			 {
			  "class": "G",
			  "_children": [
			   {"class": "H"},
			   {"class": "I"}
			  ]
			 }
			];
		
		var taxonomy_table = new Tabulator("#taxonomy-table", {
			layout:"fitDataStretch",
		    height:"450px",
		    data:taxonomy_data,
		    dataTree:true,
		    dataTreeChildIndent:15,
		    selectable:1,
		    columns:[
		    {title:"Class", field:"class", responsive:0},
		    ],
		});
		
		var individuals_data = [
			 {
			  "class": "Algorithm",
			  "individual": "smsemoa"
			 },
			 {
			  "class": "Algorithm",
			  "individual": "nsgaiii"
			 },
			 {
			  "class": "Algorithm",
			  "individual": "nsgaii"
			 },
			 {
			  "class": "B",
			  "individual": "classb"
			 }
			];
		
		var individuals_table = new Tabulator("#individuals-table", {
			layout:"fitDataStretch",
		    height:"450px",
		    data:individuals_data,
		    selectable:2,
		    columns:[
		    {title:"Individual", field:"individual", responsive:0},
		    ],
		});
		
		taxonomy_table.on("cellClick", function(e, cell){
			if(cell.getRow().isSelected()) {
				individuals_table.setFilter([{field:"class", type:"=", value:cell.getValue()}]);
			} else {
				individuals_table.clearFilter();
			}
		});
		
		document.getElementById("create-class-span").onclick = function() {
			document.getElementById("create-class-modal").style.display = "none";
		}
		document.getElementById("edit-class-span").onclick = function() {
			document.getElementById("edit-class-modal").style.display = "none";
		}
		document.getElementById("delete-class-span").onclick = function() {
			document.getElementById("delete-class-modal").style.display = "none";
		}
		
		window.onclick = function(event) {
			if (event.target == document.getElementById("create-class-modal"))
				document.getElementById("create-class-modal").style.display = "none";
			if (event.target == document.getElementById("edit-class-modal"))
				document.getElementById("edit-class-modal").style.display = "none";
			if (event.target == document.getElementById("delete-class-modal"))
				document.getElementById("delete-class-modal").style.display = "none";
		}
		
		function taxonomy_load(element) {
			var selectedcell = taxonomy_table.getSelectedRows()[0];
			if(element.id == "create-class") {
				if(selectedcell) document.getElementById("super-class").defaultValue = selectedcell.getCells()[0].getValue();
				document.getElementById("create-class-modal").style.display = "block";
			} else if(element.id == "edit-class") {
				if(selectedcell) {
					document.getElementById("edited-class").defaultValue = selectedcell.getCells()[0].getValue();
					document.getElementById("edit-class-modal").style.display = "block";
				}
			} else if(element.id == "delete-class") {
				if(selectedcell) {
					document.getElementById("deleted-class").defaultValue = selectedcell.getCells()[0].getValue();
					document.getElementById("delete-class-modal").style.display = "block";
				}
			}
		}
			
	</script>
</body>

</html>